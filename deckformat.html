<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>deckformat: Reading and conversion of input decks &mdash; The Matlab Reservoir Simulation Toolbox 2019b documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dfm: Discrete fracture matrix implementation" href="dfm.html" />
    <link rel="prev" title="co2lab: Numerical CO2 laboratory" href="co2lab.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> The Matlab Reservoir Simulation Toolbox
            <img src="_static/mrstlogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2019b
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core.html">Core functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad-core.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">ad-core</span></code>: Automatic Differentiation Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad-props.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">ad-props</span></code>: PVT, fluid models and other properties for the AD-solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad-blackoil.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">ad-blackoil</span></code>: Black-oil solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad-eor.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">ad-eor</span></code>: Enhanced oil recovery solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ad-mechanics.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">ad-mechanics</span></code>: Coupled flow and mechanics</a></li>
<li class="toctree-l1"><a class="reference internal" href="adjoint.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">adjoint</span></code>: Two-phase, incompressible adjoint solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="agglom.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">agglom</span></code>: Flow and property-based coarse-grid generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="blackoil-sequential.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">blackoil-sequential</span></code>: Sequential implicit black-oil solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="book.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">book</span></code>: Book examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="coarsegrid.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">coarsegrid</span></code>: Generation of coarse grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="compositional.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">compositional</span></code>: Equation-of-state compositional solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="co2lab.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">co2lab</span></code>: Numerical CO<sub>2</sub> laboratory</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">deckformat</span></code>: Reading and conversion of input decks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-deckformat.simulator">Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dfm.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">dfm</span></code>: Discrete fracture matrix implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dg.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">dg</span></code>: Discontinous Galerkin discretizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">diagnostics</span></code>: Flow diagnostics functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="dual_porosity.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">dual-porosity</span></code>: Dual porosity/permeability model for fractures</a></li>
<li class="toctree-l1"><a class="reference internal" href="fvbiot.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">fvbiot</span></code>: Consistent finite-volume discretizations for poroelasticity</a></li>
<li class="toctree-l1"><a class="reference internal" href="geochemistry.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">geochemistry</span></code>: Surface geochemistry</a></li>
<li class="toctree-l1"><a class="reference internal" href="heterogeneity.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">heterogeneity</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="hfm.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">hfm</span></code>: Hierarchical and embedded fractures</a></li>
<li class="toctree-l1"><a class="reference internal" href="incomp.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">incomp</span></code>: Solvers for incompressible flow and transport</a></li>
<li class="toctree-l1"><a class="reference internal" href="libgeometry.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">libgeometry</span></code>:</a></li>
<li class="toctree-l1"><a class="reference internal" href="linearsolvers.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">linearsolvers</span></code>:</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab_bgl.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">matlab_bgl</span></code>:</a></li>
<li class="toctree-l1"><a class="reference internal" href="mimetic.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">mimetic</span></code>: Mimetic solvers for pressure problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpfa.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">mpfa</span></code>: Multi-point flux approximation solvers for pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="mrst_api.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">mrst_api</span></code>: API for writing C/C++ for MRST</a></li>
<li class="toctree-l1"><a class="reference internal" href="mrst-gui.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">mrst-gui</span></code>: Graphical user-interfaces for MRST</a></li>
<li class="toctree-l1"><a class="reference internal" href="msfvm.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">msfvm</span></code>: Multiscale Finite-Volume method for pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="msmfem.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">msmfem</span></code>: Multiscale Mixed Finite-Element method for pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="msrsb.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">msrsb</span></code>: Multiscale Restriction-Smoothed Basis method for pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="nwm.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">nwm</span></code>: Near Wellbore Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="opm_gridprocessing.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">opm_gridprocessing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">optimization</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="re-mpfa.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">re-mpfa</span></code>: Richards’ equation with multi-point flux</a></li>
<li class="toctree-l1"><a class="reference internal" href="solvent.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">solvent</span></code>: Solvent solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="spe10.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">spe10</span></code>: Access to the SPE10 benchmark case</a></li>
<li class="toctree-l1"><a class="reference internal" href="steady-state.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">steady-state</span></code> Steady-state upscaling of functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamlines.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">streamlines</span></code>: Compute streamlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="triangle.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">triangle</span></code>: Triangular grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="upscaling.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">upscaling</span></code>: Upscaling of reservoir problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="vem.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">vem</span></code>: Virtual element method on general grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="vemmech.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">vemmech</span></code>: Mechanics for general grids using the virtual element method</a></li>
<li class="toctree-l1"><a class="reference internal" href="wellpaths.html"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">wellpaths</span></code>: Generation of wells using general curves</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The Matlab Reservoir Simulation Toolbox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><code class="xref mat mat-func docutils literal notranslate"><span class="pre">deckformat</span></code>: Reading and conversion of input decks</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/deckformat.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="deckformat-reading-and-conversion-of-input-decks">
<h1><code class="xref mat mat-func docutils literal notranslate"><span class="pre">deckformat</span></code>: Reading and conversion of input decks<a class="headerlink" href="#deckformat-reading-and-conversion-of-input-decks" title="Permalink to this headline"></a></h1>
<p>Functionality for reading, writing, and processing ECLIPSE input files. The core module offers simple functionality for reading a selection of keywords that mostly describe grids and cell-based properties. The deckreader module reads a larger portion of complete input files, which generally contain the following sections:</p>
<ul class="simple">
<li><p>RUNSPEC: specification of the run, including grid size, phases, table size, etc</p></li>
<li><p>GRID: grid geometry and topology and petrophysics (porosity, permeability, net-to-gross)</p></li>
<li><p>EDIT: user-defined changes to the grid data after they have been processes</p></li>
<li><p>PROPS: fluid and rock properties (relative permeability, PVT, etc)</p></li>
<li><p>REGIONS: user-defined regions with different relative permeability and capillary curves, etc</p></li>
<li><p>SOLUTION: description of how to initialize the model</p></li>
<li><p>SUMMARY: defines what kind of data to output</p></li>
<li><p>SCHEDULE: definition of wells and description of operating schedule</p></li>
</ul>
<p>Along with the input reading, the module offers several functions to construct fundamental MRST objects (e.g., grids, fluids, rock-properties or wells) from the descriptions of a particular simulation deck.</p>
<p>This module also supports reading and processing ECLIPSE output files (such as grid, init, summary and restart vectors). This enables visualising an ECLIPSE simulation case with associate dynamic data in MRST as well as using existing ECLIPSE runs to initialise an MRST simulation case.</p>
<span class="target" id="module-deckformat"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.Contents" title="Permalink to this definition"></a></dt>
<dd><p>ECLIPSE Support for reading/writing ECLIPSE input/output
mapAxes - Transform lateral position from map to local coordinate system</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.mapAxes">
<span class="sig-name descname"><span class="pre">mapAxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">pos</span></em>, <em class="sig-param"><span class="pre">MA</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.mapAxes" title="Permalink to this definition"></a></dt>
<dd><p>Transform lateral position from map to local coordinate system</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="p">=</span> <span class="n">mapAxis</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ma</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pos</strong> – nx2 vector of map coordinates that are to be transformed</p></li>
<li><p><strong>ma</strong> – 6x1 vector of points: x1 y1 x2 y2 x3 y3
Here: (x1,y1) describes a point on the y-axis, (x2,y2) is the
grid origin, and (x3,y3) is a point on the x-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>p</strong> – nx2 vector of coordinates transformed to local coordinate system</p>
</dd>
</dl>
<p class="rubric">Example:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="p">=</span> <span class="n">mapAxes</span><span class="p">([</span><span class="n">x</span> <span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span> <span class="mi">100</span> <span class="mi">0</span> <span class="mi">100</span> <span class="mi">100</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.unitConversionFactors">
<span class="sig-name descname"><span class="pre">unitConversionFactors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">inputUnit</span></em>, <em class="sig-param"><span class="pre">outputUnit</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.unitConversionFactors" title="Permalink to this definition"></a></dt>
<dd><p>Get unit conversion factors from/between given unit(s)</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="p">=</span> <span class="n">unitConversionFactors</span><span class="p">(</span><span class="n">inputUnit</span><span class="p">)</span>
<span class="n">u</span> <span class="p">=</span> <span class="n">unitConversionFactors</span><span class="p">(</span><span class="n">inputUnit</span><span class="p">,</span> <span class="n">outputUnit</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputUnit</strong> – <dl class="simple">
<dt>String, unit name must be either ‘METRIC’, ‘FIELD’, ‘LAB’,</dt><dd><p>’PVT_M’, or ‘SI’</p>
</dd>
</dl>
<p>outputUnit - Unit name as above. Default value: SI</p>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>u</strong> – Data structure of unit conversion factors from inputUnit
to outputUnit, such that e.g. for pressure,</p>
<blockquote>
<div><p>p [outputUnit] = (p [inputUnit] )*u.press</p>
</div></blockquote>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.convertDeckUnits" title="deckformat.deckinput.convertDeckUnits"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">convertDeckUnits</span></code></a>,</p>
</div>
</dd></dl>

<span class="target" id="module-deckformat.deckinput"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.deckinput.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.deckinput.Contents" title="Permalink to this definition"></a></dt>
<dd><p>DECKINPUT</p>
<dl class="simple">
<dt>Files</dt><dd><p>applyOperator          - Apply ECLIPSE/FrontSim operator to input array.
boxKeyword             - Uniform handling of BOX keyword
convertDeckUnits       - Convert ECLIPSE/FrontSim input deck units to MRST conventions
endboxKeyword          - Uniform handling of ENDBOX keyword
initializeDeck         - Initialise simple structure of ECLIPSE format type
matchWells             - Match wells to keyword records
readDefaultedKW        - Read data, possibly containing default designators, for a single keyword.
readDefaultedRecord    - Read data, possibly containing default designators, for a single record.
readEclipseDeck        - Read Simplified ECLIPSE input deck.
readEDIT               - Read edit
readGRID               - deck = readGRID(fid, dirname, deck)
readGridBoxArray       - Input grid array (global cell based) corresponding to current input box
readImmisciblePVTTable - Input immiscible ECLIPSE/FrontSim PVT table (e.g., PVDO, PVDG).
readMisciblePVTTable   - Input miscible ECLIPSE/FrontSim PVT table (e.g., PVTO, PVTG).
readPROPS              - deck = readPROPS(fid, dirname, deck)
readREGIONS            - Read regions
readRelPermTable       - Input ECLIPSE/FrontSim saturation function table (SWOF/SGOF &amp;c).
readRUNSPEC            - Read runspec
readSCHEDULE           - Read schedule
readSOLUTION           - Read solution
readSUMMARY            - Read summary
readVFPINJ             - Read VFP tables for injector
readVFPPROD            - Read VFP tables for producer
readWellKW             - Read well definitions from an ECLIPSE Deck specification.
replaceKeywords        - Replace keywords. Internal function</p>
</dd>
</dl>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.applyOperator">
<span class="sig-name descname"><span class="pre">applyOperator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sect</span></em>, <em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.applyOperator" title="Permalink to this definition"></a></dt>
<dd><p>Apply ECLIPSE/FrontSim operator to input array.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">sect</span> <span class="p">=</span> <span class="n">applyOperator</span><span class="p">(</span><span class="n">sect</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sect</strong> – Structure array representing the current deck section.</p></li>
<li><p><strong>fid</strong> – Valid file identifier (as obtained using FOPEN) to file
containing array operator description.  FTELL(fid) is assumed to
be at the start of the description (i.e., after the keyword
which prompted the reading of this table).</p></li>
<li><p><strong>kw</strong> – Operator keyword.  Must be one of
ADD      – Add constant value to existing array.
COPY     – Copy values from existing array to other array.
EQUALS   – Assign constant value to array.
MAXVALUE – Array elements must not exceed specific value.
MINVALUE – Array elements must not be less than given value.
MULTIPLY – Multiply existing array by constant value.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Box limits for the operator ‘kw’ are managed independently from the
limits that affect the property keywords (e.g., PERMX).  The limits are
initialised to that of the most recent input box defined by the BOX or
ENDBOX keywords–or the entire model if no such box limits have been
previously selected in the input deck.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>sect</strong> – Updated deck section structure array.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readGRID" title="deckformat.deckinput.readGRID"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readGRID</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readEDIT" title="deckformat.deckinput.readEDIT"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEDIT</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readPROPS" title="deckformat.deckinput.readPROPS"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readPROPS</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readREGIONS" title="deckformat.deckinput.readREGIONS"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readREGIONS</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readSOLUTION" title="deckformat.deckinput.readSOLUTION"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readSOLUTION</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.boxKeyword">
<span class="sig-name descname"><span class="pre">boxKeyword</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.boxKeyword" title="Permalink to this definition"></a></dt>
<dd><p>Uniform handling of BOX keyword</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">boxKeyword</span><span class="p">(</span><span class="n">fid</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fid</strong> – Input stream (as defined by FOPEN) from which to retrieve the
next input box definition.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Nothing, but resets the global input box depending on keyword data.</strong></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref mat mat-func docutils literal notranslate"><span class="pre">private/gridBox</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.convertDeckUnits">
<span class="sig-name descname"><span class="pre">convertDeckUnits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.convertDeckUnits" title="Permalink to this definition"></a></dt>
<dd><p>Convert ECLIPSE/FrontSim input deck units to MRST conventions</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">deck</span> <span class="p">=</span> <span class="n">convertDeckUnits</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
<span class="n">deck</span> <span class="p">=</span> <span class="n">convertDeckUnits</span><span class="p">(</span><span class="n">deck</span><span class="p">,</span> <span class="s">&#39;pn1&#39;</span><span class="p">,</span> <span class="n">pv1</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deck</strong> – An ECLIPSE/FrontSim input deck as defined by function
‘readEclipseDeck’.</p></li>
<li><p><strong>'pn'/pv</strong> – <p>A list of ‘key’/value pairs defining optional parameters.
The supported options are:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>verbose – Whether or not to emit informational messages</dt><dd><p>if a section is skipped.
Logical.  Default value: verbose = mrstVerbose</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>outputUnit – Optional output unit. Valid options are</dt><dd><p>’METRIC’, ‘FIELD’, ‘LAB’, ‘PVT_M’, ‘SI’
Default value: ‘SI’</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>deck</strong> – An ECLIPSE/FrontSim deck where all quantities affected by
varying units of measurements have been converted to MRST’s
strict, SI only, conventions.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="core.html#core.utils.mrstVerbose" title="core.utils.mrstVerbose"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">mrstVerbose</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.endboxKeyword">
<span class="sig-name descname"><span class="pre">endboxKeyword</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.endboxKeyword" title="Permalink to this definition"></a></dt>
<dd><p>Uniform handling of ENDBOX keyword</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">endboxKeyword</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>None.</strong> – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Nothing, but resets the global input box to encompass entire model.</strong></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref mat mat-func docutils literal notranslate"><span class="pre">private/gridBox</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.initializeDeck">
<span class="sig-name descname"><span class="pre">initializeDeck</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.initializeDeck" title="Permalink to this definition"></a></dt>
<dd><p>Initialise simple structure of ECLIPSE format type</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">deck</span> <span class="p">=</span> <span class="n">initializeDeck</span><span class="p">()</span>
</pre></div>
</div>
<dl>
<dt>RETURNS</dt><dd><dl>
<dt>deck - Output structure containing the known, which is empty,</dt><dd><p>This structure contains the following fields, corresponding to
separate deck sections documented in the ECLIPSE or FrontSim
manuals:</p>
<blockquote>
<div><p>RUNSPEC  - Basic meta data (dimensions &amp;c).
GRID     - Grid specification (e.g., COORD/ZCORN and PERMX)
PROPS    - Fluid properties (e.g., PVT and relperm).
REGIONS  - Region partition.  May be empty.
SOLUTION - Initial conditions.
SCHEDULE - Time step and well controls (&amp;c).</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.convertDeckUnits" title="deckformat.deckinput.convertDeckUnits"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">convertDeckUnits</span></code></a>, <a class="reference internal" href="#deckformat.grid.initEclipseGrid" title="deckformat.grid.initEclipseGrid"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseGrid</span></code></a>,
<a class="reference internal" href="#deckformat.params.rock.initEclipseRock" title="deckformat.params.rock.initEclipseRock"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseRock</span></code></a>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseFluid</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.matchWells">
<span class="sig-name descname"><span class="pre">matchWells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">lookup</span></em>, <em class="sig-param"><span class="pre">source</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.matchWells" title="Permalink to this definition"></a></dt>
<dd><p>Match wells to keyword records</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">input</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">rec</span><span class="p">]</span> <span class="p">=</span> <span class="n">matchWells</span><span class="p">(</span><span class="nb">lookup</span><span class="p">,</span> <span class="nb">source</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lookup</strong> – Cell array of strings defining what wells to look for.  The
strings must be either well names or well templates.  Well
lists are currently not supported.</p></li>
<li><p><strong>source</strong> – List of wells to match by name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><ul>
<li><p><strong>input</strong> – Array of numeric indicies into ‘lookup’ that specify which of
the ‘lookup’ records where successfully matched.  The unmatched
lookups can be determined by code like</p>
<blockquote>
<div><p>matched        = false([numel(lookup), 1]);
matched(input) = true;
unmatched      = find(~ matched);</p>
</div></blockquote>
</li>
<li><p><strong>pos</strong> – Indirection array into source record list.  Size equal to
(NUMEL(input) + 1)-by-1.  Those ‘source’ records that are
matched by lookup record ‘input(i)’ are found in positions</p>
<blockquote>
<div><p>pos(i) : (pos(i + 1) - 1)</p>
</div></blockquote>
<p>of the record list.</p>
</li>
<li><p><strong>rec</strong> – Source record list.  Array of numeric indices into ‘source’
that are matched by records in ‘lookup’.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Well names and well template names are matched case insensitively.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readDefaultedKW">
<span class="sig-name descname"><span class="pre">readDefaultedKW</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">template</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readDefaultedKW" title="Permalink to this definition"></a></dt>
<dd><p>Read data, possibly containing default designators, for a single keyword.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="p">=</span> <span class="n">readDefaultedKW</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">readDefaultedKW</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="s">&#39;pn1&#39;</span><span class="p">,</span> <span class="n">pv1</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier as obtained from FOPEN.</p></li>
<li><p><strong>template</strong> – <p>An n-element CELL array constituting a template for the next
record.  Assumed to contain ‘n’ copies of a default value.
The typical default is the string ‘NaN’, but any value may
be used as ‘readDefaultedRecord’ does not inspect this value
in any way.</p>
<p>To conveniently generate an n-element CELL array, each
element of which contains the string ‘NaN’, issue a
statement of the form:</p>
<blockquote>
<div><p>template(1 : n) = { ‘NaN’ }</p>
</div></blockquote>
</p></li>
<li><p><strong>'pn'/pv</strong> – <p>List of ‘key’/value pairs defining optional parameters.
The supported options are:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>NRec – Maximum number of records to input.  Integer.</dt><dd><p>Default value: Inf whence input will terminate
upon detecting an empty input record (usually
consisting only of a slash character).</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – Keyword data.  An m-by-n CELL array, the rows of which
corresponds to the individual records while the columns
represent the individual fields.  Default field values are
derived from the input ‘template’.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is the caller’s responsibility to supply default values in the input
‘template’ which can be reliably distinguished from all (expected) data
for any given keyword.</p>
<p>Data reading terminates when the input reader detects an empty record.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readDefaultedRecord" title="deckformat.deckinput.readDefaultedRecord"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readDefaultedRecord</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readDefaultedRecord">
<span class="sig-name descname"><span class="pre">readDefaultedRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">rec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readDefaultedRecord" title="Permalink to this definition"></a></dt>
<dd><p>Read data, possibly containing default designators, for a single record.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">rec</span> <span class="p">=</span> <span class="n">readDefaultedRecord</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
</pre></div>
</div>
<dl>
<dt>DESCRIPTIONS:</dt><dd><p>Reads a single record, containing a specific number of fields, whilst
replacing input default value designators of the form ‘n*’ (where ‘n’
is an integer) with ‘n’ copies of a user-supplied default value.</p>
<p>Function ‘readDefaultedRecord’ supports early record termination (i.e.,
the terminator character ‘/’ occurring before all fields have been
input) in which case any trailing fields will be assigned the default
value supplied by the caller.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier as obtained from FOPEN.</p></li>
<li><p><strong>template</strong> – <p>An n-element CELL array constituting a template for the next
record.  Assumed to contain ‘n’ copies of a default value.
The typical default is the string ‘NaN’, but any value may
be used as ‘readDefaultedRecord’ does not inspect this value
in any way.</p>
<p>To conveniently generate an n-element CELL array, each
element of which contains the string ‘NaN’, issue a
statement of the form:</p>
<blockquote>
<div><p>template(1 : n) = { ‘NaN’ }</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rec</strong> – Fully, or partially, filled ‘template’ CELL array.  Any
non-defaulted input data will be entered, in <em>STRING</em> form, into
the corresponding ‘rec’ element whilst leaving defaulted data in
its input ‘template’ form.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is the caller’s responsibility to supply default values in the input
‘template’ which can be reliably distinguished from all (expected) data
for any given keyword record.  Moreover, an all-default return value
(i.e., rec = template) typically constitutes the end of the keyword
data.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readDefaultedKW" title="deckformat.deckinput.readDefaultedKW"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readDefaultedKW</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readWellKW" title="deckformat.deckinput.readWellKW"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readWellKW</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readEDIT">
<span class="sig-name descname"><span class="pre">readEDIT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readEDIT" title="Permalink to this definition"></a></dt>
<dd><p>Read edit</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readEclipseDeck">
<span class="sig-name descname"><span class="pre">readEclipseDeck</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fn</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readEclipseDeck" title="Permalink to this definition"></a></dt>
<dd><p>Read Simplified ECLIPSE input deck.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">deck</span> <span class="p">=</span> <span class="n">readEclipseDeck</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> – String holding name of (readable) input deck specification.
Note: The specification is assumed to be a physical (seekable)
file on disk, not to be read in through (e.g.) a POSIX pipe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>deck</strong> – Output structure containing the known, though mostly
unprocessed, fields of the input deck specification.  This
structure contains the following fields, corresponding to
separate deck sections documented in the ECLIPSE or FrontSim
manuals:</p>
<blockquote>
<div><p>RUNSPEC  - Basic meta data (dimensions &amp;c).
GRID     - Grid specification (e.g., COORD/ZCORN and PERMX)
PROPS    - Fluid properties (e.g., PVT and relperm).
REGIONS  - Region partition.  May be empty.
SOLUTION - Initial conditions.
SCHEDULE - Time step and well controls (&amp;c).</p>
</div></blockquote>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function does no error checking.  There is an implicit assumption
that the input deck is properly formed.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.convertDeckUnits" title="deckformat.deckinput.convertDeckUnits"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">convertDeckUnits</span></code></a>, <a class="reference internal" href="#deckformat.grid.initEclipseGrid" title="deckformat.grid.initEclipseGrid"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseGrid</span></code></a>, <a class="reference internal" href="#deckformat.params.rock.initEclipseRock" title="deckformat.params.rock.initEclipseRock"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseRock</span></code></a>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseFluid</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readFixedNumRecords">
<span class="sig-name descname"><span class="pre">readFixedNumRecords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">template</span></em>, <em class="sig-param"><span class="pre">nrec</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readFixedNumRecords" title="Permalink to this definition"></a></dt>
<dd><p>Read fixed number of data records for a single keyword</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="p">=</span> <span class="n">readFixedNumRecords</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">nrec</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Description:</p>
<p>Reads a fixed number of records of constant size-number of items-from
an input stream.  The typical use case is keywords like PVTW which have
an implied copy behaviour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier as obtained from FOPEN.</p></li>
<li><p><strong>template</strong> – <dl>
<dt>An n-element CELL array constituting a template for the next</dt><dd><p>set of records.  Assumed to contain ‘n’ default values.  The
typical default is the string ‘NaN’, but any value may be
used as ‘readFixedNumRecords’ does not inspect this value in
any way.</p>
<p>To conveniently generate an n-element CELL array, each
element of which contains the string ‘NaN’, use a statement
of the form:</p>
<blockquote>
<div><p>template = repmat({ ‘NaN’ }, [1, n])</p>
</div></blockquote>
</dd>
<dt>nrec      - Number of records to input.  Finite, positive integer.</dt><dd><p>Typically derived from a maximum or exact dimension in the
RUNSPEC section.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – Keyword data.  An nrec-by-n CELL array, the rows of which
corresponds to the individual records while the columns
represent the individual fields.  Default field values are
derived from the input ‘template’ or copied from the previous
record if applicable.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is the caller’s responsibility to supply default values in the input
‘template’ which can be reliably distinguished from all (expected) data
for any given keyword.</p>
<p>Data reading terminates when the input reader detects an empty record.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readDefaultedRecord" title="deckformat.deckinput.readDefaultedRecord"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readDefaultedRecord</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readGRID">
<span class="sig-name descname"><span class="pre">readGRID</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readGRID" title="Permalink to this definition"></a></dt>
<dd><p>deck = readGRID(fid, dirname, deck)</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readGridBoxArray">
<span class="sig-name descname"><span class="pre">readGridBoxArray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sect</span></em>, <em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">kw</span></em>, <em class="sig-param"><span class="pre">nc</span></em>, <em class="sig-param"><span class="pre">dflt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readGridBoxArray" title="Permalink to this definition"></a></dt>
<dd><p>Input grid array (global cell based) corresponding to current input box</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">section</span> <span class="p">=</span> <span class="n">readGridBoxArray</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span>
<span class="n">section</span> <span class="p">=</span> <span class="n">readGridBoxArray</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">nc</span><span class="p">,</span> <span class="n">dflt</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>section</strong> – Deck section data structure.  Expected to be one of GRID,
PROPS, REGIONS, or (in the future) SCHEDULE.</p></li>
<li><p><strong>fid</strong> – Valid file identifier as defined by function FOPEN.  The file
ponter FTELL(fid) is expected to be positioned directly
after the keyword that prompted reading of a grid array
(e.g., directly after the PERMX keyword).</p></li>
<li><p><strong>kw</strong> – Particular keyword (string) to which the next input data will
be assigned.  Input data will be extracted from the ‘fid’ for
all (global) cells corresponding to the current input box.</p></li>
<li><p><strong>nc</strong> – Number of cells in the global grid model.  Corresponds to
PROD(deck.RUNSPEC.DIMENS).  This number is used for
preallocating the output array (‘kw’) if it does not already
exist in the input deck section represented by ‘section’.</p></li>
<li><p><strong>dflt</strong> – Value assigned to unspecified array elements.  This number is
used for preallocating the output array (‘kw’) if it does not
already exist in the input deck section represented by
‘section’.  Treated as zero if unspecified, meaning that the
output array gets allocated and zero-initialized if this
parameter is not specified at the call site.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>section</strong> – Deck section data structure, modified such that new values
are assigned to the array ‘fld’ in the cells corresponding to
the current input box.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readGRID" title="deckformat.deckinput.readGRID"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readGRID</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readREGIONS" title="deckformat.deckinput.readREGIONS"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readREGIONS</span></code></a>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">private/boxIndices</span></code>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">private/gridBox</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readGridBoxArrayDP">
<span class="sig-name descname"><span class="pre">readGridBoxArrayDP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sect</span></em>, <em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">kw</span></em>, <em class="sig-param"><span class="pre">nc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readGridBoxArrayDP" title="Permalink to this definition"></a></dt>
<dd><p>Input grid array (global cell based) corresponding to current input box</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">section</span> <span class="p">=</span> <span class="n">readGridBoxArray</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>section</strong> – Deck section data structure.  Expected to be one of GRID,
PROPS, REGIONS, or (in the future) SCHEDULE.</p></li>
<li><p><strong>fid</strong> – Valid file identifier as defined by function FOPEN.  The file
ponter FTELL(fid) is expected to be positioned directly
after the keyword that prompted reading of a grid array
(e.g., directly after the PERMX keyword).</p></li>
<li><p><strong>kw</strong> – Particular keyword (string) to which the next input data will
be assigned.  Input data will be extracted from the ‘fid’ for
all (global) cells corresponding to the current input box.</p></li>
<li><p><strong>nc</strong> – Number of cells in the global grid model.  Corresponds to
PROD(deck.RUNSPEC.DIMENS).  This number is used for
preallocating the output array (‘kw’) if it does not already
exist in the input deck section represented by ‘section’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>section</strong> – Deck section data structure, modified such that new values
are assigned to the array ‘fld’ in the cells corresponding to
the current input box.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>readGRID, readREGIONS, private/boxIndices, private/gridBox.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readImmisciblePVTTable">
<span class="sig-name descname"><span class="pre">readImmisciblePVTTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">ntab</span></em>, <em class="sig-param"><span class="pre">ncol</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readImmisciblePVTTable" title="Permalink to this definition"></a></dt>
<dd><p>Input immiscible ECLIPSE/FrontSim PVT table (e.g., PVDO, PVDG).</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span> <span class="p">=</span> <span class="n">readImmisciblePVTTable</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">ntab</span><span class="p">,</span> <span class="n">ncol</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier (as obtained using FOPEN) to file
containing the PVT table.  FTELL(fid) is assumed to be at the
start of the PVT table (i.e., after the keyword, if any, which
prompted the reading of this table).</p></li>
<li><p><strong>ntab</strong> – Number of PVT tables to input.  Typically corresponds to the
ECLIPSE/FrontSim parameter ‘NTPVT’ (item two of ‘TABDIMS’).</p></li>
<li><p><strong>ncol</strong> – Number of columns in each of the ‘ntab’ tables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Table</strong> – An ntab-by-1 cell array of immiscible PVT tables.  An
immiscible PVT table is an m-by-ncol array of type DOUBLE.  It
is the caller’s responsibility to correctly interpret the
individual columns of a specific table.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Immiscible PVT tables in ECLIPSE or FrontSim contain an arbitrary
number of records, each record separated by whitespace (typically
newline, ‘n’).  A table is terminated by a slash character (‘/’).</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readRelPermTable" title="deckformat.deckinput.readRelPermTable"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readRelPermTable</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readMisciblePVTTable" title="deckformat.deckinput.readMisciblePVTTable"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readMisciblePVTTable</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readMisciblePVTTable">
<span class="sig-name descname"><span class="pre">readMisciblePVTTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">ntab</span></em>, <em class="sig-param"><span class="pre">ncol</span></em>, <em class="sig-param"><span class="pre">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readMisciblePVTTable" title="Permalink to this definition"></a></dt>
<dd><p>Input miscible ECLIPSE/FrontSim PVT table (e.g., PVTO, PVTG).</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span> <span class="p">=</span> <span class="n">readMisciblePVTTable</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">ntab</span><span class="p">,</span> <span class="n">ncol</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier (as obtained from FOPEN) to file
containing the PVT table.  FTELL(fid) is assumed to be at the
start of the PVT table (i.e., after the keyword, if any, which
prompted the reading of this table).</p></li>
<li><p><strong>ntab</strong> – Number of PVT tables to input.  Typically corresponds to the
ECLIPSE/FrontSim parameter ‘NTPVT’ (item two of ‘TABDIMS’).</p></li>
<li><p><strong>ncol</strong> – Number of columns in each of the ‘ntab’ tables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Table</strong> – An ntab-by-1 cell array of miscible PVT tables.  A miscible PVT
table is represented as a data structure (STRUCT) with the
following fields:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>key  – Primary lookup key for data table interpolation.</dt><dd><p>This is typically pressure or Rs values.  The key
may be used for binning input quantities before
interpolating the ‘data’ portion related to each
key.  For binning purposes, ‘key’ should normally
be sorted in the input source represented by ‘fid’.</p>
</dd>
</dl>
</li>
<li><dl>
<dt>pos  – Indirection map into ‘data’.  Specifically, the</dt><dd><p>data related to ‘key(i)’ is found in the submatrix</p>
<blockquote>
<div><p>data(pos(i) : pos(i + 1) - 1, :)</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>data – Table data.  An m-by-ncol array of type DOUBLE.</dt><dd><p>It is the caller’s responsibility to correctly
interpret the individual columns of a specific
table.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Miscible PVT tables in ECLIPSE or FrontSim contain an arbitrary number
of records, each record terminated by a slash character (‘/’).  At
least one record (the last), and optionally all other records, must
specify additional data (typically Rv or pressure values for
undersaturated fluid solutions).</p>
<p>Function ‘readMisciblePVTTable’ does not verify or enforce sorted keys.</p>
<p>The return value, ‘Table’, may be converted to a structure array using
the statement:</p>
<blockquote>
<div><p>Table = [ Table{:} ] .’  % or:  Table = vertcat(Table{:})</p>
</div></blockquote>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readRelPermTable" title="deckformat.deckinput.readRelPermTable"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readRelPermTable</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readImmisciblePVTTable" title="deckformat.deckinput.readImmisciblePVTTable"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readImmisciblePVTTable</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readPROPS">
<span class="sig-name descname"><span class="pre">readPROPS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readPROPS" title="Permalink to this definition"></a></dt>
<dd><p>deck = readPROPS(fid, dirname, deck)</p>
<p>Otherwise intentionally undocumented.</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readREGIONS">
<span class="sig-name descname"><span class="pre">readREGIONS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readREGIONS" title="Permalink to this definition"></a></dt>
<dd><p>Read regions</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readRUNSPEC">
<span class="sig-name descname"><span class="pre">readRUNSPEC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readRUNSPEC" title="Permalink to this definition"></a></dt>
<dd><p>Read runspec</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readRelPermTable">
<span class="sig-name descname"><span class="pre">readRelPermTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">kw</span></em>, <em class="sig-param"><span class="pre">ntab</span></em>, <em class="sig-param"><span class="pre">ncol</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readRelPermTable" title="Permalink to this definition"></a></dt>
<dd><p>Input ECLIPSE/FrontSim saturation function table (SWOF/SGOF &amp;c).</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span> <span class="p">=</span> <span class="n">readRelPermTable</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">ntab</span><span class="p">,</span> <span class="n">ncol</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier (as obtained using FOPEN) to file
containing the rel-perm table.  FTELL(fid) is assumed to be at
the start of the rel-perm table (i.e., after the keyword, if
any, which prompted the reading of this table).</p></li>
<li><p><strong>kw</strong> – Keyword that prompted this saturation function table read.  Used
in diagnostic messages only.</p></li>
<li><p><strong>ntab</strong> – Number of relative permeability tables to input.  Typically
corresponds to the ECLIPSE/FrontSim parameter ‘NTSFUN’.</p></li>
<li><p><strong>ncol</strong> – Number of columns in each of the ‘ntab’ tables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Table</strong> – An ntab-by-1 cell array of relative permeability tables.  Any
default values in columns 2:ncol specified by the syntax ‘1*’
in the input data are replaced by linearly interpolated data
from the non-default values in the corresponding column.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref mat mat-func docutils literal notranslate"><span class="pre">swof</span></code>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">sgof</span></code>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">swfn</span></code>, <code class="xref mat mat-func docutils literal notranslate"><span class="pre">sgfn</span></code>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readSCHEDULE">
<span class="sig-name descname"><span class="pre">readSCHEDULE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readSCHEDULE" title="Permalink to this definition"></a></dt>
<dd><p>Read schedule</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readSOLUTION">
<span class="sig-name descname"><span class="pre">readSOLUTION</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readSOLUTION" title="Permalink to this definition"></a></dt>
<dd><p>Read solution</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readSUMMARY">
<span class="sig-name descname"><span class="pre">readSUMMARY</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">dirname</span></em>, <em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readSUMMARY" title="Permalink to this definition"></a></dt>
<dd><p>Read summary</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readVFPINJ">
<span class="sig-name descname"><span class="pre">readVFPINJ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readVFPINJ" title="Permalink to this definition"></a></dt>
<dd><p>Read VFP tables for injector</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readVFPPROD">
<span class="sig-name descname"><span class="pre">readVFPPROD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readVFPPROD" title="Permalink to this definition"></a></dt>
<dd><p>Read VFP tables for producer</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.readWellKW">
<span class="sig-name descname"><span class="pre">readWellKW</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">w</span></em>, <em class="sig-param"><span class="pre">kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.readWellKW" title="Permalink to this definition"></a></dt>
<dd><p>Read well definitions from an ECLIPSE Deck specification.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="p">=</span> <span class="n">readWellKW</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> – Valid file identifier as obtained from FOPEN.</p></li>
<li><p><strong>w</strong> – Structure array containing current well configuration.  May be
empty if the well keyword is ‘WELSPECS’.</p></li>
<li><p><strong>kw</strong> – Current well specification keyword.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>w</strong> – Updated structure array containing new data for keyword ‘kw’.</p>
</dd>
</dl>
<dl>
<dt>COMMENTS:</dt><dd><p>The currently recognized well keywords are:</p>
<blockquote>
<div><p>‘WELSPECS’, ‘COMPDAT’, ‘WCONHIST’, ‘WCONINJ’, ‘WCONINJE’,
‘WCONINJH’, ‘WCONPROD’, ‘GRUPTREE’, ‘WGRUPCON’, ‘GCONPROD’,
‘WPOLYMER’, ‘WSURFACT’, ‘WELOPEN’ and ‘WELTARG’</p>
</div></blockquote>
<p>Be advised that we do not support the complete feature set of these
keywords.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="#deckformat.params.wells_and_bc.processWells" title="deckformat.params.wells_and_bc.processWells"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">processWells</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.deckinput.replaceKeywords">
<span class="sig-name descname"><span class="pre">replaceKeywords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sect</span></em>, <em class="sig-param"><span class="pre">fid</span></em>, <em class="sig-param"><span class="pre">keywords</span></em>, <em class="sig-param"><span class="pre">nc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.deckinput.replaceKeywords" title="Permalink to this definition"></a></dt>
<dd><p>Replace keywords. Internal function</p>
</dd></dl>

<span class="target" id="module-deckformat.grid"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.grid.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.grid.Contents" title="Permalink to this definition"></a></dt>
<dd><p>Files
initEclipseGrid - Construct MRST grid from ECLIPSE GRID section.</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.grid.initEclipseGrid">
<span class="sig-name descname"><span class="pre">initEclipseGrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.grid.initEclipseGrid" title="Permalink to this definition"></a></dt>
<dd><p>Construct MRST grid from ECLIPSE GRID section.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">G</span> <span class="p">=</span> <span class="n">initEclipseGrid</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
<span class="n">G</span> <span class="p">=</span> <span class="n">initEclipseGrid</span><span class="p">(</span><span class="n">deck</span><span class="p">,</span> <span class="s">&#39;pn1&#39;</span><span class="p">,</span> <span class="n">pv1</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deck</strong> – Raw input data in Deck form as defined by function
‘readEclipseDeck’.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>‘pn’/pv</strong> – List of ‘key’/value pairs defining optional parameters.  The
supported options are:</p>
<dl class="simple">
<dt>mapAxes - Apply the mapAxes transformation if present.</dt><dd><p>DEFAULT: false.</p>
</dd>
</dl>
<p>In addition, the routine can pass on a number of paramters
to the function processGRDECL, which is used to construct
corner-point grids</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>G</strong> – Valid ‘grid_structure’</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="core.html#core.gridprocessing.grid_structure" title="core.gridprocessing.grid_structure"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">grid_structure</span></code></a>.</p>
</div>
</dd></dl>

<span class="target" id="module-deckformat.params"></span><span class="target" id="module-deckformat.params.fluid"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.params.fluid.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.params.fluid.Contents" title="Permalink to this definition"></a></dt>
<dd><p>Models for three-phase compressible fluids.</p>
<dl class="simple">
<dt>Files</dt><dd><p>expandMiscibleTable - Expand Miscible PVT Table Definition to Format Suitable for Visualization</p>
</dd>
</dl>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.fluid.expandMiscibleTable">
<span class="sig-name descname"><span class="pre">expandMiscibleTable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">T</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.fluid.expandMiscibleTable" title="Permalink to this definition"></a></dt>
<dd><p>Expand Miscible PVT Table Definition to Format Suitable for Visualization</p>
<dl class="simple">
<dt>SYNOPSIS</dt><dd><p>ExTable = expandMiscibleTable(T)
ExTable = expandMiscibleTable(T, ‘pn1’, pv1, …)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> – <dl>
<dt>Miscible table, or cell-array of miscible tables, as defined</dt><dd><p>by function readEclipseDeck and, possibly, function
convertDeckUnits.</p>
</dd>
<dt>’pn’/pv - List of ‘key’/value pairs defining optional parameters.  The</dt><dd><p>supported options are</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>inner – Name (string) of inner table range.</dt><dd><p>Default: ‘inner’.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>outer – Name (string) of outer table range.</dt><dd><p>Default: ‘outer’.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ExTable</strong> – Structure of expanded miscible property table definitions.
One element for each input table (typically: PVT region)
identified by the argument ‘T’.</p>
</dd>
</dl>
<p class="rubric">Example:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="c">% Input simulation deck, convert to MRST&#39;s strict SI unit conventions.</span>
<span class="n">deck</span> <span class="p">=</span> <span class="n">convertDeckUnits</span><span class="p">(</span><span class="n">readEclipsDeck</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>

<span class="c">% Expand PVTO and PVTG Tabulated (Miscible) Property Functions.</span>
<span class="n">ExPVTO</span> <span class="p">=</span> <span class="n">expandMiscibleTable</span><span class="p">(</span><span class="n">deck</span><span class="p">.</span><span class="n">PROPS</span><span class="p">.</span><span class="n">PVTO</span><span class="p">,</span> <span class="p">...</span>
                             <span class="s">&#39;inner&#39;</span><span class="p">,</span> <span class="s">&#39;Po&#39;</span><span class="p">,</span> <span class="s">&#39;outer&#39;</span><span class="p">,</span> <span class="s">&#39;Rs&#39;</span><span class="p">)</span>
<span class="n">ExPVTG</span> <span class="p">=</span> <span class="n">expandMiscibleTable</span><span class="p">(</span><span class="n">deck</span><span class="p">.</span><span class="n">PROPS</span><span class="p">.</span><span class="n">PVTG</span><span class="p">,</span> <span class="p">...</span>
                             <span class="s">&#39;inner&#39;</span><span class="p">,</span> <span class="s">&#39;Rv&#39;</span><span class="p">,</span> <span class="s">&#39;outer&#39;</span><span class="p">,</span> <span class="s">&#39;Pg&#39;</span><span class="p">)</span>

<span class="c">%----------------------------------------------------------------</span>

<span class="c">% Visualize First Region&#39;s &#39;Bo&#39; Factor (i.e., the Oil FVF).</span>
<span class="p">[</span><span class="n">Po</span><span class="p">,</span> <span class="n">Rs</span><span class="p">]</span> <span class="p">=</span> <span class="nb">deal</span><span class="p">(</span><span class="n">convertTo</span><span class="p">(</span><span class="n">ExPVTO</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">Po</span><span class="p">,</span> <span class="n">barsa</span><span class="p">),</span> <span class="n">ExPVTO</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">Rs</span><span class="p">);</span>

<span class="nb">figure</span>
<span class="nb">surf</span><span class="p">(</span><span class="n">Po</span><span class="p">,</span> <span class="n">Rs</span><span class="p">,</span> <span class="n">ExPVTO</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">B</span><span class="p">,</span> <span class="p">...</span>
     <span class="s">&#39;EdgeColor&#39;</span><span class="p">,</span> <span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="s">&#39;FaceColor&#39;</span><span class="p">,</span> <span class="s">&#39;interp&#39;</span><span class="p">,</span> <span class="p">...</span>
     <span class="s">&#39;Marker&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;MarkerEdgeColor&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;MarkerSize&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c">% Add Contour Plot of &#39;Bo&#39; for Additional Visual Aid</span>
<span class="nb">hold</span> <span class="n">on</span><span class="p">,</span> <span class="nb">contour</span><span class="p">(</span><span class="n">Po</span><span class="p">,</span> <span class="n">Rs</span><span class="p">,</span> <span class="n">ExPVTO</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">B</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>

<span class="nb">title</span><span class="p">(</span><span class="s">&#39;Oil Formation Volume Factor (B_o) [rm^3/Sm^3]&#39;</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;Oil Pressure (P_o) [Bar]&#39;</span><span class="p">)</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;Dissolved Gas-Oil Ratio (R_s) [Sm^3/Sm^3]&#39;</span><span class="p">)</span>

<span class="c">%----------------------------------------------------------------</span>

<span class="c">% Visualize Last Region&#39;s Tabulated Gas Viscosity Function</span>
<span class="p">[</span><span class="n">Rv</span><span class="p">,</span> <span class="n">Pg</span><span class="p">,</span> <span class="n">mu_g</span><span class="p">]</span> <span class="p">=</span> <span class="nb">deal</span><span class="p">(</span><span class="n">ExPVTG</span><span class="p">(</span><span class="k">end</span><span class="p">).</span><span class="n">Rv</span><span class="p">,</span> <span class="p">...</span>
                      <span class="n">convertTo</span><span class="p">(</span><span class="n">ExPVTG</span><span class="p">(</span><span class="k">end</span><span class="p">).</span><span class="n">Pg</span><span class="p">,</span> <span class="n">barsa</span><span class="p">),</span> <span class="p">...</span>
                      <span class="n">convertTo</span><span class="p">(</span><span class="n">ExPVTG</span><span class="p">(</span><span class="k">end</span><span class="p">).</span><span class="n">mu</span><span class="p">,</span> <span class="n">centi</span><span class="o">*</span><span class="n">poise</span><span class="p">));</span>

<span class="nb">figure</span>
<span class="nb">surf</span><span class="p">(</span><span class="n">Pg</span><span class="p">,</span> <span class="n">Rv</span><span class="p">,</span> <span class="n">mu_g</span><span class="p">,</span> <span class="p">...</span>
     <span class="s">&#39;EdgeColor&#39;</span><span class="p">,</span> <span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="s">&#39;FaceColor&#39;</span><span class="p">,</span> <span class="s">&#39;interp&#39;</span><span class="p">,</span> <span class="p">...</span>
     <span class="s">&#39;Marker&#39;</span><span class="p">,</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;MarkerEdgeColor&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;MarkerSize&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="c">% Add Contour Plot of &#39;mu_g&#39; for Additional Visual Aid</span>
<span class="nb">hold</span> <span class="n">on</span><span class="p">,</span> <span class="nb">contour</span><span class="p">(</span><span class="n">Pg</span><span class="p">,</span> <span class="n">Rv</span><span class="p">,</span> <span class="n">mu_g</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>

<span class="nb">title</span><span class="p">(</span><span class="s">&#39;Gas Viscosity (\mu_g) [cP]&#39;</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;Gas Pressure (P_g) [Bar]&#39;</span><span class="p">)</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;Vaporized Oil-Gas Ratio (R_v) [Sm^3/Sm^3]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>readEclipseDeck, convertDeckUnits.</p>
</div>
</dd></dl>

<span class="target" id="module-deckformat.params.rock"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.params.rock.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.params.rock.Contents" title="Permalink to this definition"></a></dt>
<dd><p>Files
compressRock       - Compress rock properties to active cells only
computeTranMult    - Compute transmissibility multipliers.
initEclipseRock    - Extract rock properties from input deck
initRelpermScaling - set up the relperm scaling parameters from deck (‘SOGCR’, ‘SGU’, ‘SGCR’,
processAquifer     - return array aquifer. Each row corresponds to a cell connected to the aquifer.</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.compressRock">
<span class="sig-name descname"><span class="pre">compressRock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rock</span></em>, <em class="sig-param"><span class="pre">active</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.compressRock" title="Permalink to this definition"></a></dt>
<dd><p>Compress rock properties to active cells only</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">rock</span> <span class="p">=</span> <span class="n">compressRock</span><span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rock</strong> – Rock data structure formed, e.g., in function
‘initEclipseRock’.</p></li>
<li><p><strong>active</strong> – Active cell map.  Logical or numeric indices into ‘perm’ (&amp;c)
fields that denotes which cell propertis to extract.  Often
equal to the ‘cells.indexMap’ field of a grid_structure.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="core.html#core.gridprocessing.grid_structure" title="core.gridprocessing.grid_structure"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">grid_structure</span></code></a>, <a class="reference internal" href="#deckformat.params.rock.initEclipseRock" title="deckformat.params.rock.initEclipseRock"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">initEclipseRock</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.computeTranMult">
<span class="sig-name descname"><span class="pre">computeTranMult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">G</span></em>, <em class="sig-param"><span class="pre">rockprop</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.computeTranMult" title="Permalink to this definition"></a></dt>
<dd><p>Compute transmissibility multipliers.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">mult</span> <span class="p">=</span> <span class="n">computeTranMult</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rockprop</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>G</strong> – Valid grid structure.  Must be a logically Cartesian grid such
as the grids created by means of functions ‘processGRDECL’ or
‘cartGrid’.  Moreover, the half-face tags (G.cells.faces(:,2))
must not contain values outside the set (1 : 6).</p></li>
<li><p><strong>rockprop</strong> – Rock property data structure.  May contain ECLIPSE multiplier
keywords such as ‘MULTX’, ‘MULTY’, or ‘MULTZ-‘ (matched case
insensitively).  Often corresponds to the ‘deck.GRID’ data
structure of function ‘readEclipseDeck’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mult</strong> – Half-face transmissibility multipliers.  An empty array (i.e.,
mult = []) if the rock property data structure contains no
multiplier keyword fields.  Otherwise (i.e., when there are
multiplier keywords present), a SIZE(G.cells.faces,1)-by-1
DOUBLE array such that ‘mult(i)’ is a transmissibility
multiplier for half-face (half-contact) ‘i’.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A multiplier keyword, if present, must contain one datum for each cell
in the global grid (PROD(G.cartDims) cells).  Values in inactive cells
(e.g., due to explicit deactivation or pinch/collapse) are ignored.</p>
<p>We underscore the fact that these multiplier values are designed to go
with the half-face (one-sided) transmissibility values derived from
function ‘computeTrans’.  In particular, the multiplicative factors
must be included BEFORE computing the harmonic average of the one-sided
transmissibilities.</p>
</div>
<p class="rubric">Example:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="c">%% Compute connection transmissibilities on an ECLIPSE-type model</span>
<span class="c">%</span>
<span class="c">% 1) Compute background, one-sided transmissibilities</span>
<span class="n">htrans</span> <span class="p">=</span> <span class="n">computeTrans</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rock</span><span class="p">);</span>

<span class="c">% 2) Compute multipliers for one-sided transmissibilities</span>
<span class="n">tmult</span> <span class="p">=</span> <span class="n">computeTranMult</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">deck</span><span class="p">.</span><span class="n">GRID</span><span class="p">);</span>

<span class="k">if</span> <span class="o">~</span> <span class="nb">isempty</span><span class="p">(</span><span class="n">tmult</span><span class="p">),</span>
   <span class="c">% 2b) Include multipliers for one-sided transmissibilities</span>
   <span class="n">htrans</span> <span class="p">=</span> <span class="n">htrans</span> <span class="o">.*</span> <span class="n">tmult</span><span class="p">;</span>
<span class="k">end</span>

<span class="c">% 3) Compute final background (static) transmissibilities</span>
<span class="n">trans</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">./</span> <span class="nb">accumarray</span><span class="p">(</span><span class="n">G</span><span class="p">.</span><span class="n">cells</span><span class="p">.</span><span class="n">faces</span><span class="p">(:,</span><span class="mi">1</span><span class="p">),</span> <span class="p">...</span>
                        <span class="mi">1</span> <span class="o">./</span> <span class="n">htrans</span><span class="p">,</span>        <span class="p">...</span>
                        <span class="p">[</span><span class="n">G</span><span class="p">.</span><span class="n">faces</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="mi">1</span><span class="p">]);</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="core.html#core.gridprocessing.grid_structure" title="core.gridprocessing.grid_structure"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">grid_structure</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.initEclipseDPRock">
<span class="sig-name descname"><span class="pre">initEclipseDPRock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">splitRock</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.initEclipseDPRock" title="Permalink to this definition"></a></dt>
<dd><p>Extract rock properties from input deck</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">rock</span> <span class="p">=</span> <span class="n">initEclipseRock</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deck</strong> – Raw input data in Deck form as defined by function
‘readEclipseDeck’.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rock</strong> – Rock data stucture containing the following fields:
- perm – Permeability values.  Layout as dictated by function</p>
<blockquote>
<div><p>‘permTensor’.</p>
</div></blockquote>
<ul class="simple">
<li><p>poro – Porosity values.  Corresponds to ‘PORO’ keyword.</p></li>
<li><p>ntg  – Net-to-gross values.  Corresponds to ‘NTG’ keyword.</p></li>
<li><dl class="simple">
<dt>cr   – Rock compressibility.  Corresponds to item two of</dt><dd><p>‘ROCK’ keyword (in PROPS section).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pref – Reference pressure for rock compressibility.  Data</dt><dd><p>from item one of ‘ROCK’ keyword.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A given ‘rock’ field is only created if the corresponding keyword is
present in the input deck.</p>
</div>
<p class="rubric">Example:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="c">%Create a rock data structure for active cells only</span>

<span class="n">rock</span> <span class="p">=</span> <span class="n">initEclipseRock</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
<span class="n">rock</span> <span class="p">=</span> <span class="n">compressRock</span><span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">G</span><span class="p">.</span><span class="n">cells</span><span class="p">.</span><span class="n">indexMap</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>readEclipseDeck, convertDeckUnits, permTensor, compressRock</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.initEclipseRock">
<span class="sig-name descname"><span class="pre">initEclipseRock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.initEclipseRock" title="Permalink to this definition"></a></dt>
<dd><p>Extract rock properties from input deck</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">rock</span> <span class="p">=</span> <span class="n">initEclipseRock</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deck</strong> – Raw input data in Deck form as defined by function
‘readEclipseDeck’.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rock</strong> –</p>
<dl class="simple">
<dt>Rock data stucture containing the following fields:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>perm – Permeability values.  Layout as dictated by function</dt><dd><p>‘permTensor’.</p>
</dd>
</dl>
</li>
<li><p>poro – Porosity values.  Corresponds to ‘PORO’ keyword.</p></li>
<li><p>ntg  – Net-to-gross values.  Corresponds to ‘NTG’ keyword.</p></li>
<li><dl class="simple">
<dt>cr   – Rock compressibility.  Corresponds to item two of</dt><dd><p>‘ROCK’ keyword (in PROPS section).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pref – Reference pressure for rock compressibility.  Data</dt><dd><p>from item one of ‘ROCK’ keyword.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>If, additionally, the input deck’s ‘GRID’ section contains
transmissibility multiplier data (keywords ‘MULTX’, ‘MULTY’,
‘MULTZ’, ‘MULTX-‘, ‘MULTY-‘, ‘MULTZ-‘), then those values will
be stored as individual fields in a substructure ‘multipliers’.
The field names are lower case without ‘MULT’ and hypens are
replaced by underscores.  For instance, the ‘MULTX-‘ data will
be stored as</p>
<blockquote>
<div><ul class="simple">
<li><p><a href="#id5"><span class="problematic" id="id6">rock.multipliers.x_</span></a></p></li>
</ul>
</div></blockquote>
<p>This function is not aware of time-dependent multipliers that
may be present in the ‘SCHEDULE’ section.</p>
<p>Furthermore, if the input deck’s GRID section contains fault
multiplier data (both of the keywords ‘FAULTS’ and ‘MULTFLT’),
then those values will be copied verbatim to a substructure
‘faultdata’ and retain their original field names, converted to
lower case, in this substructure.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A given ‘rock’ field is only created if the corresponding keyword is
present in the input deck.</p>
</div>
<p class="rubric">Example:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="c">%Create a rock data structure for active cells only</span>

<span class="n">rock</span> <span class="p">=</span> <span class="n">initEclipseRock</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
<span class="n">rock</span> <span class="p">=</span> <span class="n">compressRock</span><span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">G</span><span class="p">.</span><span class="n">cells</span><span class="p">.</span><span class="n">indexMap</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readEclipseDeck" title="deckformat.deckinput.readEclipseDeck"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readEclipseDeck</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.convertDeckUnits" title="deckformat.deckinput.convertDeckUnits"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">convertDeckUnits</span></code></a>, <a class="reference internal" href="core.html#core.params.rock.permTensor" title="core.params.rock.permTensor"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">permTensor</span></code></a>, <a class="reference internal" href="#deckformat.params.rock.compressRock" title="deckformat.params.rock.compressRock"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">compressRock</span></code></a></p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.initRelpermScaling">
<span class="sig-name descname"><span class="pre">initRelpermScaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">nc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.initRelpermScaling" title="Permalink to this definition"></a></dt>
<dd><p>set up the relperm scaling parameters from deck (‘SOGCR’, ‘SGU’, ‘SGCR’,
‘SWCR’, ‘SOWCR’, ‘KRW’, ….)
Note: non-active cells are also assigned a value.</p>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.rock.processAquifer">
<span class="sig-name descname"><span class="pre">processAquifer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">deck</span></em>, <em class="sig-param"><span class="pre">G</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.rock.processAquifer" title="Permalink to this definition"></a></dt>
<dd><p>return array aquifer. Each row corresponds to a cell connected to the aquifer.
the aquind structure gives the content of each column:</p>
</dd></dl>

<span class="target" id="module-deckformat.params.wells_and_bc"></span><dl class="mat script">
<dt class="sig sig-object mat" id="deckformat.params.wells_and_bc.Contents">
<span class="sig-name descname"><span class="pre">Contents</span></span><a class="headerlink" href="#deckformat.params.wells_and_bc.Contents" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>WELLS_AND_BC</dt><dd><p>Support for Constructing Wells and Boundary Conditions From Input Decks</p>
</dd>
<dt>Files</dt><dd><p>processWells - Construct MRST well structure from ECLIPSE input deck control.</p>
</dd>
</dl>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.wells_and_bc.processWells">
<span class="sig-name descname"><span class="pre">processWells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">G</span></em>, <em class="sig-param"><span class="pre">rock</span></em>, <em class="sig-param"><span class="pre">control</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.wells_and_bc.processWells" title="Permalink to this definition"></a></dt>
<dd><p>Construct MRST well structure from ECLIPSE input deck control.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">W</span> <span class="p">=</span> <span class="n">processWells</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rock</span><span class="p">,</span> <span class="n">control</span><span class="p">)</span>
<span class="n">W</span> <span class="p">=</span> <span class="n">processWells</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rock</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="s">&#39;pn1&#39;</span><span class="p">,</span> <span class="n">pv1</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>G</strong> – Grid data structure.</p></li>
<li><p><strong>rock</strong> – Rock data structure.  Must contain valid field ‘perm’.</p></li>
<li><p><strong>control</strong> – Well control mode.  Assumed to be defined from function
‘readSCHEDULE’.</p></li>
<li><p><strong>'pn'/pv</strong> – <dl class="simple">
<dt>List of ‘key’/value pairs defining optional parameters.  The</dt><dd><p>supported options are:</p>
</dd>
</dl>
<ul>
<li><dl class="simple">
<dt>InnerProduct – The inner product with which to define</dt><dd><p>the mass matrix.
String.  Default value = ‘ip_tpf’.</p>
</dd>
<dt>Supported values are:</dt><dd><ul>
<li><p>’ip_simple’</p></li>
<li><p>’ip_tpf’</p></li>
<li><p>’ip_quasitpf’</p></li>
<li><p>’ip_rt’</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Verbose      – Whether or not to emit informational messages</dt><dd><p>if any requested well control mode is
unsupported.
Logical.  Default value = false.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>DepthReorder – Boolean indicating if we should attempt to</dt><dd><p>reorder the perforations by depth. Should
only be used for vertical wells. Default off.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>strictParsing – Throw errors if unsupported well controls</dt><dd><p>are encountered. If disabled, wells with
unsupported controls will recieve NaN values
for control and phase composition.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>createDefaultWell – If enabled, this function will not parse</dt><dd><p>any wells, but simply return a default well
structure suitable for further modification.</p>
</dd>
</dl>
</li>
<li><p>cellDims – optional input of accurate cellDims</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>W</strong> –</p>
<dl>
<dt>Updated (or freshly created) well structure, each element of which</dt><dd><p>has the following fields:
cells   – Grid cells perforated by this well.
type    – Well control type.
val     – Target control value.
r       – Well bore radius.
dir     – Well direction.
WI      – Well index.
dZ      – Vertical displacement of each well perforation measured</p>
<blockquote>
<div><p>from ‘highest’ horizontal contact (i.e., the ‘TOP’
contact with the minimum ‘Z’ value counted amongst all
cells perforated by this well).</p>
</div></blockquote>
</dd>
</dl>
<p>name     – Well name.
compi    – Fluid composition–only used for injectors.
sign     – injection (+) or production (-) flag.
status   – Boolean indicating if the well is open or shut.
cstatus  – One entry per cell, indicating if the completion is</p>
<blockquote>
<div><p>open.</p>
</div></blockquote>
<dl class="simple">
<dt>lims     – Limits for the well. Contains subfields for the types</dt><dd><p>of limits applicable to the well (bhp, rate, orat, …)
Injectors generally have upper limits, while producers
have lower limits.</p>
</dd>
</dl>
<p>c        – Component concentrations. Unit convention may vary.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#deckformat.deckinput.readSCHEDULE" title="deckformat.deckinput.readSCHEDULE"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readSCHEDULE</span></code></a>, <a class="reference internal" href="#deckformat.deckinput.readWellKW" title="deckformat.deckinput.readWellKW"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">readWellKW</span></code></a>, <a class="reference internal" href="core.html#core.params.wells_and_bc.addWell" title="core.params.wells_and_bc.addWell"><code class="xref mat mat-func docutils literal notranslate"><span class="pre">addWell</span></code></a>.</p>
</div>
</dd></dl>

<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.params.wells_and_bc.processWellsDP">
<span class="sig-name descname"><span class="pre">processWellsDP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">G</span></em>, <em class="sig-param"><span class="pre">rock_matrix</span></em>, <em class="sig-param"><span class="pre">rock_fracture</span></em>, <em class="sig-param"><span class="pre">control</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.params.wells_and_bc.processWellsDP" title="Permalink to this definition"></a></dt>
<dd><p>Construct MRST well structure from ECLIPSE input deck control.</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="n">W</span> <span class="p">=</span> <span class="n">processWells</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rock</span><span class="p">,</span> <span class="n">control</span><span class="p">)</span>
<span class="n">W</span> <span class="p">=</span> <span class="n">processWells</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">rock</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="s">&#39;pn1&#39;</span><span class="p">,</span> <span class="n">pv1</span><span class="p">,</span> <span class="p">...)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>G</strong> – Grid data structure.</p></li>
<li><p><strong>rock</strong> – Rock data structure.  Must contain valid field ‘perm’.</p></li>
<li><p><strong>control</strong> – Well control mode.  Assumed to be defined from function
‘readSCHEDULE’.</p></li>
<li><p><strong>'pn'/pv</strong> – <dl class="simple">
<dt>List of ‘key’/value pairs defining optional parameters.  The</dt><dd><p>supported options are:</p>
</dd>
</dl>
<ul>
<li><dl class="simple">
<dt>InnerProduct – The inner product with which to define</dt><dd><p>the mass matrix.
String.  Default value = ‘ip_tpf’.</p>
</dd>
<dt>Supported values are:</dt><dd><ul>
<li><p>’ip_simple’</p></li>
<li><p>’ip_tpf’</p></li>
<li><p>’ip_quasitpf’</p></li>
<li><p>’ip_rt’</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Verbose      – Whether or not to emit informational messages</dt><dd><p>if any requested well control mode is
unsupported.
Logical.  Default value = false.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>DepthReorder – Boolean indicating if we should attempt to</dt><dd><p>reorder the perforations by depth. Should
only be used for vertical wells. Default off.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>strictParsing – Throw errors if unsupported well controls</dt><dd><p>are encountered. If disabled, wells with
unsupported controls will recieve NaN values
for control and phase composition.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>createDefaultWell – If enabled, this function will not parse</dt><dd><p>any wells, but simply return a default well
structure suitable for further modification.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="simple">
<dt>… automodule:: deckformat.resultinput</dt><dd><dl class="field-list simple">
<dt class="field-odd">members</dt>
<dd class="field-odd"><p></p></dd>
</dl>
</dd>
</dl>
<div class="section" id="module-deckformat.simulator">
<span id="simulator"></span><h2>Simulator<a class="headerlink" href="#module-deckformat.simulator" title="Permalink to this headline"></a></h2>
<dl class="mat function">
<dt class="sig sig-object mat" id="deckformat.simulator.initEclipseModelDP">
<span class="sig-name descname"><span class="pre">initEclipseModelDP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">inputfile</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#deckformat.simulator.initEclipseModelDP" title="Permalink to this definition"></a></dt>
<dd><p>Initialise basic MRST objects from ECLIPSE input file (<a href="#id1"><span class="problematic" id="id2">*</span></a>.DATA)</p>
<p class="rubric">Synopsis:</p>
<div class="highlight-octave notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">G</span><span class="p">,</span> <span class="n">rock_fracture</span><span class="p">,</span> <span class="n">rock_matrix</span><span class="p">,</span> <span class="n">fluid_matrix</span><span class="p">,</span> <span class="n">fluid_fracture</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">wells</span><span class="p">,</span> <span class="p">...</span>
   <span class="n">htransf</span><span class="p">,</span> <span class="n">transf</span><span class="p">,</span> <span class="n">htransm</span><span class="p">,</span> <span class="n">transm</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">deck</span><span class="p">,</span> <span class="n">DP_info</span><span class="p">]</span> <span class="p">=</span> <span class="n">initEclipseModelDP</span><span class="p">(</span><span class="n">inputfile</span><span class="p">,</span><span class="s">&#39;pn1&#39;</span><span class="p">,</span><span class="s">&#39;pv1&#39;</span><span class="p">,..)</span>
</pre></div>
</div>
<p class="rubric">Description:</p>
<p>Function ‘initEclipseModelDP’ constructs the fundamental MRST simulation
objects (grid, rock properties, fluids &amp;c) from a single ECLIPSE-style
input file (typically named ‘<a href="#id3"><span class="problematic" id="id4">*</span></a>.DATA’). This reader has been modifed to
read in and setup dual porosity/permeability models.</p>
<dl class="simple">
<dt>PARAMS:</dt><dd><dl class="simple">
<dt>inputfile - Name (string) of input file.  The input is assumed to be a</dt><dd><p>regular file on disk and not, say, a POSIX pipe.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><p><strong>‘pn’/pv</strong> – List of ‘key’/value pairs defining optional parameters.  These
are passed on to the function ‘processGRDECL’, which is used
to construct corner-point grids. Of particular interest is
the parameter ‘SplitDisconnected’ which tells whether or not
to split disconnected grid components into separate
grids/reservoirs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>G</strong> – Grid structure as defined by function ‘initEclipseGrid’.</p></li>
<li><p><strong>rock_fracture</strong> – Fracture Rock data structure as defined by function ‘initEclipseRockDP’.</p></li>
<li><p><strong>rock_matrix</strong> – Matrix Rock data structure as defined by function ‘initEclipseRockDP’.</p></li>
<li><p><strong>fluid_matrix</strong> – Matrix Fluid data structure as defined by function ‘initEclipseFluid’.</p></li>
<li><p><strong>fluid_fracture</strong> – Fracture Fluid data structure as defined by function ‘initEclipseFluid’.</p></li>
<li><p><strong>wells</strong> – Initial well object as defined by function ‘processWells’. This
structure is derived from the initial well configuration.</p></li>
<li><p><strong>htrans</strong> – Background (absolute) one-sided transmissibilities as defined
by functions ‘computeTrans’ and ‘computeTranMult’.  Also
incorporates net-to-gross factors if available.</p></li>
<li><p><strong>trans</strong> – Background (absolute) connection transmissibilities defined by
harmonic averaging of the one-sided transmissibilities (htrans)
while including fault-related transmissibility multipliers too.</p></li>
<li><p><strong>dt</strong> – Report step sequence derived from ‘TSTEP’ and ‘DATES’.</p></li>
<li><p><strong>deck</strong> – Raw input deck as defined by functions ‘readEclipseDeck’ and
‘convertDeckUnits’.  Especially usefull for the dynamic
SCHEDULE information pertaining to switching well controls.</p></li>
<li><p><strong>DP_info</strong> – Dual porsity information sigma, matrix block sizes</p></li>
<li><p><strong>NOT Handled for DP models Yet</strong></p></li>
<li><p><strong>state</strong> – Initial state object as defined by function ‘initEclipseState’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="co2lab.html" class="btn btn-neutral float-left" title="co2lab: Numerical CO2 laboratory" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dfm.html" class="btn btn-neutral float-right" title="dfm: Discrete fracture matrix implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, SINTEF Digital.
      <span class="lastupdated">Last updated on Sep 23, 2021.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>